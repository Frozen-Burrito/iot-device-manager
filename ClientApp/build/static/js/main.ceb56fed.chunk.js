(this.webpackJsonpreactappsample=this.webpackJsonpreactappsample||[]).push([[0],{122:function(e,t,a){},125:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(32),i=a.n(r),c=a(26),o=a(9),s=a(10),d=a(13),u=a(12),m=a(14),h=a(131),p=a(8),v=a(139),f=a(138),g=(a(94),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).toggleNavbar=n.toggleNavbar.bind(Object(p.a)(n)),n.state={collapsed:!0},n}return Object(s.a)(a,[{key:"toggleNavbar",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"render",value:function(){return l.a.createElement(v.a,{className:"box-shadow mb-3",bg:"dark",variant:"dark"},l.a.createElement(h.a,null,l.a.createElement(v.a.Brand,{as:c.b,to:"/"},"Device Registry"),l.a.createElement(v.a.Toggle,{"aria-controls":"navbar-content",className:"mr-2"}),l.a.createElement(v.a.Collapse,{id:"navbar-content"},l.a.createElement(f.a,{className:"ms-auto"},l.a.createElement(f.a.Link,{as:c.b,to:"/"},"Home"),l.a.createElement(f.a.Link,{as:c.b,to:"/devices"},"Devices"),l.a.createElement(f.a.Link,{as:c.b,to:"/devices/add",className:"btn btn-primary text-white"},"Add a Device")))))}}]),a}(n.Component));g.displayName=g.name;var b=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(g,null),l.a.createElement(h.a,null,this.props.children),l.a.createElement(h.a,{fluid:!0,className:"mt-5 py-3 bg-light text-dark text-center"},"Built by FrozenBurrito"))}}]),a}(n.Component);b.displayName=b.name;var E=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h1",null,"Hello, world!"),l.a.createElement("p",null,"Welcome to your new single-page application, built with:"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("a",{href:"https://get.asp.net/"},"ASP.NET Core")," and ",l.a.createElement("a",{href:"https://msdn.microsoft.com/en-us/library/67ef8sbd.aspx"},"C#")," for cross-platform server-side code"),l.a.createElement("li",null,l.a.createElement("a",{href:"https://facebook.github.io/react/"},"React")," for client-side code"),l.a.createElement("li",null,l.a.createElement("a",{href:"http://getbootstrap.com/"},"Bootstrap")," for layout and styling")),l.a.createElement("p",null,"To help you get started, we have also set up:"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Client-side navigation"),". For example, click ",l.a.createElement("em",null,"Counter")," then ",l.a.createElement("em",null,"Back")," to return here."),l.a.createElement("li",null,l.a.createElement("strong",null,"Development server integration"),". In development mode, the development server from ",l.a.createElement("code",null,"create-react-app")," runs in the background automatically, so your client-side resources are dynamically built on demand and the page refreshes when you modify any file."),l.a.createElement("li",null,l.a.createElement("strong",null,"Efficient production builds"),". In production mode, development-time features are disabled, and your ",l.a.createElement("code",null,"dotnet publish")," configuration produces minified, efficiently bundled JavaScript files.")),l.a.createElement("p",null,"The ",l.a.createElement("code",null,"ClientApp")," subdirectory is a standard React application based on the ",l.a.createElement("code",null,"create-react-app")," template. If you open a command prompt in that directory, you can run ",l.a.createElement("code",null,"npm")," commands such as ",l.a.createElement("code",null,"npm test")," or ",l.a.createElement("code",null,"npm install"),"."))}}]),a}(n.Component);E.displayName=E.name;var y=a(1),D=a(23),C=a.n(D),k=a(39),j=a(40),O=a.n(j),w=a(133),N=a(134),x=a(84),T=a(140),A=a(141),M=a(135),S=a(86),L=a(132),I=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={thing:n.props.thing},n.handleDeleteAction=n.handleDeleteAction.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"handleDeleteAction",value:function(e){this.props.onDeleteAction()}},{key:"render",value:function(){var e=this.state.thing;return l.a.createElement(x.a,{className:"mt-3"},l.a.createElement(T.a,null,l.a.createElement(T.a.Body,null,l.a.createElement(T.a.Title,{tag:"h5"},l.a.createElement(A.a,{direction:"horizontal",gap:1},e.name,l.a.createElement(M.a,{className:"ms-auto"},l.a.createElement(M.a.Toggle,{as:S.a,variant:"transparent",id:"dropdown-basic"},l.a.createElement("i",{className:"bi bi-three-dots-vertical"})),l.a.createElement(M.a.Menu,null,l.a.createElement(M.a.Item,{onClick:function(e){return console.log("Edit")}},"Edit"),l.a.createElement(M.a.Item,{onClick:this.handleDeleteAction},"Remove"))))),l.a.createElement(T.a.Subtitle,{tag:"h6",className:"mb-2 text-muted"},e.identifier),l.a.createElement(A.a,{direction:"horizontal",gap:1},e.labels.split(", ").map((function(e){return l.a.createElement(L.a,{key:e,bg:"info"},e.replace(/^\w/,(function(e){return e.toUpperCase()})))}))),l.a.createElement(T.a.Text,{style:{minHeight:96}},e.shortDescription.length>130?e.shortDescription.substr(0,130)+"...":e.shortDescription),l.a.createElement(c.b,{to:"/devices/".concat(e.identifier),className:"btn btn-primary"},"View"))))}}]),a}(n.Component);I.displayName=I.name;var Q=a(137),R=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleQueryChange=n.handleQueryChange.bind(Object(p.a)(n)),n.handleLayoutToggle=n.handleLayoutToggle.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"handleQueryChange",value:function(e){this.props.onQueryChange(e)}},{key:"handleLayoutToggle",value:function(e){this.props.onLayoutToggle()}},{key:"render",value:function(){var e=this,t=this.props.filters,a=t.searchQuery,n=t.isGridView;return l.a.createElement(Q.a,{className:"mt-4"},l.a.createElement(w.a,null,l.a.createElement(x.a,null,l.a.createElement(A.a,{direction:"horizontal",gap:2},l.a.createElement("i",{className:"bi bi-search"}),l.a.createElement(Q.a.Group,null,l.a.createElement(Q.a.Control,{type:"text",placeholder:"Search for a device",value:a,onChange:function(t){return e.handleQueryChange(t.target.value)}})),l.a.createElement(S.a,{variant:"light",className:"me-0",style:{fontSize:20},disabled:0===a.length,onClick:function(t){return e.handleQueryChange("")}},l.a.createElement("i",{className:"bi bi-x"})))),l.a.createElement(x.a,{md:3}),l.a.createElement(x.a,{md:4},l.a.createElement(A.a,{direction:"horizontal",gap:1},l.a.createElement(M.a,{className:"ms-auto"},l.a.createElement(M.a.Toggle,{variant:"light",id:"tag-dropdown"},"Filter by tag"),l.a.createElement(M.a.Menu,null,l.a.createElement(M.a.Item,null,"Device"),l.a.createElement(M.a.Item,null,"Sensor"),l.a.createElement(M.a.Item,null,"Temperature"))),l.a.createElement(M.a,null,l.a.createElement(M.a.Toggle,{variant:"light",id:"tag-dropdown"},"Filter by type"),l.a.createElement(M.a.Menu,null,l.a.createElement(M.a.Item,null,"Actuator"),l.a.createElement(M.a.Item,null,"Sensor"),l.a.createElement(M.a.Item,null,"Controller"))),l.a.createElement(S.a,{variant:"light",style:{fontSize:16},onClick:this.handleLayoutToggle},n?l.a.createElement("i",{className:"bi bi-list-task"}):l.a.createElement("i",{className:"bi bi-grid-3x2-gap"}))))))}}]),a}(n.Component);R.displayName=R.name;var G=a(136),H=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleClose=n.handleClose.bind(Object(p.a)(n)),n.handleAccept=n.handleAccept.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"handleClose",value:function(){this.props.onCloseModal()}},{key:"handleAccept",value:function(){this.props.onAcceptModal()}},{key:"render",value:function(){var e=this.props,t=e.show,a=e.data;return l.a.createElement(G.a,{show:t,onHide:this.handleClose},l.a.createElement(G.a.Header,{closeButton:!0},l.a.createElement(G.a.Title,null,a.title)),l.a.createElement(G.a.Body,null,a.body),l.a.createElement(G.a.Footer,null,l.a.createElement(S.a,{variant:"secondary",onClick:this.handleClose},"Close"),l.a.createElement(S.a,{variant:a.actionColor,onClick:this.handleAccept},a.action)))}}]),a}(n.Component);H.displayName=H.name;var B=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={things:[],filters:{searchQuery:"",isGridView:!0},displayDeleteModal:!1,selectedDeviceId:"",loading:!1},n.renderThingCollection=n.renderThingCollection.bind(Object(p.a)(n)),n.handleQueryChange=n.handleQueryChange.bind(Object(p.a)(n)),n.handleLayoutToggle=n.handleLayoutToggle.bind(Object(p.a)(n)),n.handleDeleteModalDisplay=n.handleDeleteModalDisplay.bind(Object(p.a)(n)),n.handleDeleteModalAccept=n.handleDeleteModalAccept.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.populateThingData()}},{key:"populateThingData",value:function(){var e=Object(k.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("api/things");case 2:t=e.sent,this.setState({things:t.data,loading:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleQueryChange",value:function(e){this.setState((function(t,a){return{filters:Object(y.a)(Object(y.a)({},t.filters),{},{searchQuery:e})}}))}},{key:"handleLayoutToggle",value:function(){this.setState((function(e,t){return{filters:Object(y.a)(Object(y.a)({},e.filters),{},{isGridView:!e.filters.isGridView})}}))}},{key:"handleDeleteModalDisplay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.setState((function(a,n){return{selectedDeviceId:t,displayDeleteModal:e}}))}},{key:"handleDeleteModalAccept",value:function(){var e=Object(k.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Removal was confirmed."),t=this.state.selectedDeviceId,this.handleDeleteModalDisplay(!1),e.prev=3,e.next=6,O.a.delete("api/things/".concat(t));case 6:this.setState((function(e,a){return{things:e.things.filter((function(e){return e.identifier!==t}))}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log("Can't delete, an error was raised: ",e.t0);case 12:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"renderThingCollection",value:function(){var e=this,t=this.state,a=t.things,n=t.filters,r=n.searchQuery,i=n.isGridView,c=new RegExp(r,"i"),o=r.length>0?a.filter((function(e){return e.name.search(c)>=0})):a;return l.a.createElement(w.a,{xs:1,md:i?3:1,className:"g-3"},o.map((function(t){return l.a.createElement(I,{key:t.identifier,thing:t,onDeleteAction:function(){return e.handleDeleteModalDisplay(!0,t.identifier)}})})))}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.filters,r=t.displayDeleteModal,i=t.things.find((function(t){return t.identifier===e.state.selectedDeviceId})),c={title:"Remove ".concat(i?i.name:"unknown device","?"),body:"If you confirm this action, the device will be deleted permanently from the collection.",action:"Remove",actionColor:"danger"},o=a?l.a.createElement(N.a,{color:"dark"}):this.renderThingCollection();return l.a.createElement("div",null,l.a.createElement("h1",null,"Your Things"),l.a.createElement("p",null,"Here you can view, edit and manage all your intelligent devices."),l.a.createElement(R,{filters:n,onQueryChange:this.handleQueryChange,onLayoutToggle:this.handleLayoutToggle}),l.a.createElement("hr",null),o,l.a.createElement(H,{show:r,data:c,onAcceptModal:this.handleDeleteModalAccept,onCloseModal:function(){return e.handleDeleteModalDisplay(!1)}}))}}]),a}(n.Component);B.displayName=B.name;var z=a(7),F=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={device:{identifier:"some-identifier",name:"",labels:"",shortDescription:"",type:0,ipAddress:""},charLengths:{name:50,shortDescription:300},loading:!1},n.handleSubmit=n.handleSubmit.bind(Object(p.a)(n)),n.handleChange=n.handleChange.bind(Object(p.a)(n)),n.renderAddForm=n.renderAddForm.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState({device:Object(y.a)(Object(y.a)({},this.state.device),{},Object(z.a)({},n,a))})}},{key:"handleSubmit",value:function(){var e=Object(k.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(this.state.device),e.next=4,O.a.post("api/things",this.state.device);case 4:this.props.history.push("/devices");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderAddForm",value:function(){var e=this;return l.a.createElement(Q.a,null,l.a.createElement(Q.a.Group,{className:"mb-3"},l.a.createElement(Q.a.Label,null,"Identifier"),l.a.createElement(Q.a.Control,{type:"text",name:"identifier","aria-describedby":"idHelp",value:this.state.device.identifier,onChange:function(t){return e.handleChange(t)}}),l.a.createElement(Q.a.Text,{id:"idHelp",muted:!0},"A unique string of characters that identifies the device. If not assigned, a random unique id is created.")),l.a.createElement(Q.a.Group,{className:"mb-3"},l.a.createElement(Q.a.Label,null,"Device Name"),l.a.createElement(Q.a.Control,{type:"text",name:"name","aria-describedby":"nameHelp",value:this.state.device.name,onChange:function(t){return e.handleChange(t)}}),l.a.createElement(Q.a.Text,{id:"nameHelp",muted:!0},this.state.charLengths.name-this.state.device.name.length," characters remaining.")),l.a.createElement(Q.a.Group,{className:"mb-3"},l.a.createElement(Q.a.Label,null,"IP Address"),l.a.createElement(Q.a.Control,{type:"text",name:"ipAddress",placeholder:"0.0.0.0",value:this.state.device.ipAddress,onChange:function(t){return e.handleChange(t)}})),l.a.createElement(Q.a.Group,{className:"mb-3"},l.a.createElement(Q.a.Label,null,"Description"),l.a.createElement(Q.a.Control,{as:"textarea",name:"shortDescription","aria-describedby":"descHelp",value:this.state.device.shortDescription,onChange:function(t){return e.handleChange(t)}}),l.a.createElement(Q.a.Text,{id:"descHelp",muted:!0},this.state.charLengths.shortDescription-this.state.device.shortDescription.length," characters remaining.")),l.a.createElement(Q.a.Group,{className:"mb-3"},l.a.createElement(Q.a.Label,null,"Type of Device"),l.a.createElement(Q.a.Select,{"aria-label":"Select the type of device"},l.a.createElement("option",null,"None"),["light","sensor","device","panel"].map((function(e,t){return l.a.createElement("option",{key:e,value:t},e.replace(/^\w/,(function(e){return e.toUpperCase()})))})))),l.a.createElement(Q.a.Group,{className:"mb-4"},l.a.createElement(Q.a.Label,null,"Tags"),l.a.createElement(Q.a.Control,{type:"text",name:"labels",placeholder:"Sensor, Light, ...",value:this.state.device.lables,onChange:function(t){return e.handleChange(t)}})),l.a.createElement(S.a,{color:"primary",onClick:this.handleSubmit},"Save"))}},{key:"render",value:function(){var e=this.renderAddForm();return l.a.createElement("div",null,l.a.createElement("h1",{id:"tabelLabel"},"Add a Device"),l.a.createElement("p",null,"Specify the details of the device and click 'Save'."),e)}}]),a}(n.Component);F.displayName=F.name;var V=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={thing:{},showDeleteModal:!1,loading:!0,error:null},n.renderThingDetails=n.renderThingDetails.bind(Object(p.a)(n)),n.handleDeleteModalDisplay=n.handleDeleteModalDisplay.bind(Object(p.a)(n)),n.handleDeleteModalAccept=n.handleDeleteModalAccept.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.identifier;this.getThingDetails(e)}},{key:"getThingDetails",value:function(){var e=Object(k.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t&&""!==t){e.next=3;break}throw new Error("No device identifier provided.");case 3:return e.next=5,O.a.get("api/things/".concat(t));case 5:a=e.sent,console.log(a),this.setState({thing:a.data,loading:!1}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),this.setState({error:e.t0.Message});case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"renderThingDetails",value:function(){var e=this,t=this.state.thing,a=l.a.createElement(A.a,{direction:"horizontal",gap:1},l.a.createElement("i",{className:"bi bi-tags me-1"}),t.labels.split(", ").map((function(e){return l.a.createElement(L.a,{key:e,bg:"info"},e.replace(/^\w/,(function(e){return e.toUpperCase()})))})));return l.a.createElement(w.a,null,l.a.createElement(x.a,{md:7},l.a.createElement(A.a,{direction:"vertical",gap:2},l.a.createElement("h3",{className:"mb-0 display-6 fs-4 text-muted"},t.identifier),l.a.createElement("h1",null,t.name),a,l.a.createElement("p",{className:"text-muted"},l.a.createElement("i",{className:"bi bi-globe me-1"}),t.ipAddress),l.a.createElement("p",{className:"text-muted"},t.shortDescription))),l.a.createElement(x.a,null,l.a.createElement(A.a,{direction:"horizontal",gap:2},l.a.createElement(S.a,{variant:"light",className:"ms-auto"},l.a.createElement("i",{className:"bi bi-sliders"})),l.a.createElement(S.a,{variant:"danger",onClick:function(t){return e.handleDeleteModalDisplay(!0)}},l.a.createElement("i",{className:"bi bi-x"}),"Remove Device"))),l.a.createElement("hr",null))}},{key:"handleDeleteModalDisplay",value:function(e){this.setState((function(t,a){return{showDeleteModal:e}}))}},{key:"handleDeleteModalAccept",value:function(){var e=Object(k.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Removal was confirmed."),t=this.state.thing.identifier,this.handleDeleteModalDisplay(!1),e.prev=3,e.next=6,O.a.delete("api/things/".concat(t));case 6:this.props.history.push("/devices"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log("Can't delete, an error was raised: ",e.t0);case 12:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.showDeleteModal,r={title:"Remove ".concat(this.state.thing.name,"?"),body:"If you confirm this action, the device will be deleted permanently from the collection.",action:"Remove",actionColor:"danger"},i=a?l.a.createElement("h1",null,"Loading"):this.renderThingDetails();return l.a.createElement("div",{className:"mt-4"},i,l.a.createElement("div",null,l.a.createElement("h3",null,"Data"),l.a.createElement("div",{className:"text-center my-5"},l.a.createElement("i",{className:"bi bi-cloud-lightning fs-2"}),l.a.createElement("p",{className:"fs-5"},"There is no data available right now."))),l.a.createElement(H,{show:n,data:r,onAcceptModal:this.handleDeleteModalAccept,onCloseModal:function(){return e.handleDeleteModalDisplay(!1)}}))}}]),a}(n.Component);V.displayName=V.name;a(122);var W=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement(c.a,null,l.a.createElement(b,null,l.a.createElement(m.c,null,l.a.createElement(m.a,{exact:!0,path:"/",component:E}),l.a.createElement(m.a,{exact:!0,path:"/devices",component:B}),l.a.createElement(m.a,{exact:!0,path:"/devices/add",component:F}),l.a.createElement(m.a,{path:"/devices/:identifier",component:V}))))}}]),a}(n.Component);W.displayName=W.name;var U=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function J(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(123),a(124);var q=document.getElementsByTagName("base")[0].getAttribute("href"),P=document.getElementById("root");i.a.render(l.a.createElement(c.a,{basename:q},l.a.createElement(W,null)),P),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");U?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):J(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):J(e)}))}}()},89:function(e,t,a){e.exports=a(125)},94:function(e,t,a){}},[[89,1,2]]]);
//# sourceMappingURL=main.ceb56fed.chunk.js.map